C:\proyectos\Zerf_Transcriptor\src\gemini_refiner.py:5: FutureWarning: 

All support for the `google.generativeai` package has ended. It will no longer be receiving 
updates or bug fixes. Please switch to the `google.genai` package as soon as possible.
See README for more details:

https://github.com/google-gemini/deprecated-generative-ai-python/blob/main/README.md

  import google.generativeai as genai
­ƒÜÇ ZERF TRANSCRIPTOR
   Modelo Whisper: large-v3
   Idioma: es
   Modo: auto
   Videos por lote: 1

­ƒñû Inicializando Faster-Whisper modelo 'large-v3'...
­ƒôï Cargando lista de videos...
   Total de URLs en lista: 1022
   URLs pendientes: 997

­ƒô║ Procesando 1 video(s)...


################################################################################
VIDEO 1/1
################################################################################


================================================================================
­ƒÄ¼ PROCESANDO VIDEO
================================================================================
­ƒôÑ Descargando (AUDIO ONLY - SUBPROCESS): https://www.youtube.com/watch?v=2fBjMHMtzps
[youtube] Extracting URL: https://www.youtube.com/watch?v=2fBjMHMtzps
[youtube] 2fBjMHMtzps: Downloading webpage
WARNING: [youtube] No supported JavaScript runtime could be found. Only deno is enabled by default; to use another runtime add  --js-runtimes RUNTIME[:PATH]  to your command/config. YouTube extraction without a JS runtime has been deprecated, and some formats may be missing. See  https://github.com/yt-dlp/yt-dlp/wiki/EJS  for details on installing one
[youtube] 2fBjMHMtzps: Downloading android vr player API JSON
[info] 2fBjMHMtzps: Downloading subtitles: es
[info] 2fBjMHMtzps: Downloading 1 format(s): 251
[info] Writing video subtitles to: videos\2fBjMHMtzps.es.vtt
WARNING: The extractor specified to use impersonation for this download, but no impersonate target is available. If you encounter errors, then see  https://github.com/yt-dlp/yt-dlp#impersonation  for information on installing the required dependencies
[download] Destination: videos\2fBjMHMtzps.es.vtt

[download]    1.00KiB at  648.67KiB/s (00:00:00)
[download]    3.00KiB at    1.11MiB/s (00:00:00)
[download]    7.00KiB at    1.85MiB/s (00:00:00)
[download]   15.00KiB at    3.33MiB/s (00:00:00)
[download]   31.00KiB at    5.73MiB/s (00:00:00)
[download]   63.00KiB at    7.08MiB/s (00:00:00)
[download]  109.20KiB at    7.35MiB/s (00:00:00)
[download] 100% of  109.20KiB in 00:00:00 at 1.17MiB/s
[SubtitlesConvertor] Converting subtitles
Deleting original file videos\2fBjMHMtzps.es.vtt (pass -k to keep)
[download] Destination: videos\2fBjMHMtzps.webm

[download]   0.0% of   12.88MiB at  648.97KiB/s ETA 00:20
[download]   0.0% of   12.88MiB at    1.22MiB/s ETA 00:10
[download]   0.1% of   12.88MiB at    2.20MiB/s ETA 00:05
[download]   0.1% of   12.88MiB at    4.13MiB/s ETA 00:03
[download]   0.2% of   12.88MiB at    5.30MiB/s ETA 00:02
[download]   0.5% of   12.88MiB at    4.42MiB/s ETA 00:02
[download]   1.0% of   12.88MiB at    5.42MiB/s ETA 00:02
[download]   1.9% of   12.88MiB at    7.13MiB/s ETA 00:01
[download]   3.9% of   12.88MiB at    9.01MiB/s ETA 00:01
[download]   7.8% of   12.88MiB at    9.54MiB/s ETA 00:01
[download]  15.5% of   12.88MiB at    7.94MiB/s ETA 00:01
[download]  31.0% of   12.88MiB at    7.64MiB/s ETA 00:01
[download]  62.1% of   12.88MiB at    8.95MiB/s ETA 00:00
[download]  76.2% of   12.88MiB at    9.31MiB/s ETA 00:00
[download]  76.2% of   12.88MiB at  Unknown B/s ETA Unknown
[download]  76.2% of   12.88MiB at  Unknown B/s ETA Unknown
[download]  76.2% of   12.88MiB at    4.74MiB/s ETA 00:00  
[download]  76.3% of   12.88MiB at    8.03MiB/s ETA 00:00
[download]  76.4% of   12.88MiB at   12.43MiB/s ETA 00:00
[download]  76.7% of   12.88MiB at   17.56MiB/s ETA 00:00
[download]  77.1% of   12.88MiB at   20.46MiB/s ETA 00:00
[download]  78.1% of   12.88MiB at   12.35MiB/s ETA 00:00
[download]  80.0% of   12.88MiB at   12.10MiB/s ETA 00:00
[download]  83.9% of   12.88MiB at   11.50MiB/s ETA 00:00
[download]  91.7% of   12.88MiB at   11.41MiB/s ETA 00:00
[download] 100.0% of   12.88MiB at   11.32MiB/s ETA 00:00
[download] 100% of   12.88MiB in 00:00:01 at 8.00MiB/s   
[ExtractAudio] Destination: videos\2fBjMHMtzps.m4a
Deleting original file videos\2fBjMHMtzps.webm (pass -k to keep)
Ô£ô Descargado: LAMINE YAMAL. LA CAMPA├æA DESDE MADRID COMPRADA POR LOS NYORDOS DE AQU├ì (30.52 MB)
ÔÅ▒´©Å  Duraci├│n del video: 13m 53s

­ƒôØ Transcribiendo con modelo large-v3...
Ô£ô Modelo Faster-Whisper cargado: large-v3
­ƒÄñ Transcribiendo (Modo Turbo): videos\2fBjMHMtzps.m4a
   [Progreso] 00:19 transcritos...
   [Progreso] 00:29 transcritos...
   [Progreso] 00:45 transcritos...
   [Progreso] 00:58 transcritos...
   [Progreso] 01:12 transcritos...
   [Progreso] 01:28 transcritos...
   [Progreso] 01:40 transcritos...
   [Progreso] 01:55 transcritos...
   [Progreso] 02:09 transcritos...
   [Progreso] 02:23 transcritos...
   [Progreso] 02:39 transcritos...
   [Progreso] 02:51 transcritos...
   [Progreso] 03:02 transcritos...
   [Progreso] 03:15 transcritos...
   [Progreso] 03:33 transcritos...
   [Progreso] 03:45 transcritos...
   [Progreso] 03:55 transcritos...
   [Progreso] 04:08 transcritos...
   [Progreso] 04:19 transcritos...
   [Progreso] 04:34 transcritos...
   [Progreso] 04:48 transcritos...
   [Progreso] 04:59 transcritos...
   [Progreso] 05:13 transcritos...
   [Progreso] 05:25 transcritos...
   [Progreso] 05:37 transcritos...
   [Progreso] 05:49 transcritos...
   [Progreso] 06:00 transcritos...
   [Progreso] 06:11 transcritos...
   [Progreso] 06:25 transcritos...
   [Progreso] 06:40 transcritos...
   [Progreso] 06:51 transcritos...
   [Progreso] 07:04 transcritos...
   [Progreso] 07:16 transcritos...
   [Progreso] 07:30 transcritos...
   [Progreso] 07:42 transcritos...
   [Progreso] 07:57 transcritos...
   [Progreso] 08:14 transcritos...
   [Progreso] 08:28 transcritos...
   [Progreso] 08:43 transcritos...
   [Progreso] 08:59 transcritos...
   [Progreso] 09:16 transcritos...
   [Progreso] 09:31 transcritos...
   [Progreso] 09:49 transcritos...
   [Progreso] 10:00 transcritos...
   [Progreso] 10:15 transcritos...
   [Progreso] 10:29 transcritos...
   [Progreso] 10:41 transcritos...
   [Progreso] 10:51 transcritos...
   [Progreso] 11:05 transcritos...
   [Progreso] 11:18 transcritos...
   [Progreso] 11:34 transcritos...
   [Progreso] 11:46 transcritos...
   [Progreso] 12:01 transcritos...
   [Progreso] 12:12 transcritos...
   [Progreso] 12:23 transcritos...
   [Progreso] 12:35 transcritos...
   [Progreso] 12:47 transcritos...
   [Progreso] 13:01 transcritos...
   [Progreso] 13:13 transcritos...
   [Progreso] 13:26 transcritos...
   [Progreso] 13:39 transcritos...
   [Progreso] 13:52 transcritos...
Ô£ô Transcripci├│n Turbo completada
­ƒÆ¥ Transcripci├│n cruda guardada en: output/transcripciones/raw/20251027 LAMINE YAMAL LA CAMPANA DESDE MADRID COMPRADA POR LOS NYORDOS DE AQUI_raw.json

ÔÜÖ´©Å  INICIANDO POST-PROCESADO...
­ƒôÜ Aplicando diccionario personalizado...
­ƒÆ¥ Generando archivos de salida...
Ô£ô Archivo SRT generado: output/transcripciones/srt/20251027 LAMINE YAMAL LA CAMPANA DESDE MADRID COMPRADA POR LOS NYORDOS DE AQUI.srt
Ô£ô Archivo TXT generado: output/transcripciones/txt/20251027 LAMINE YAMAL LA CAMPANA DESDE MADRID COMPRADA POR LOS NYORDOS DE AQUI.txt
Ô£¿ Iniciando Refinado Inteligente con Gemini 3 Flash...
   Ô£ô Cargados subt├¡tulos de YouTube para contexto
   Ô£ô Texto refinado guardado: output/transcripciones/txt/20251027 LAMINE YAMAL LA CAMPANA DESDE MADRID COMPRADA POR LOS NYORDOS DE AQUI_refinado.txt
­ƒºá Subiendo audio a Gemini para an├ílisis emocional: 2fBjMHMtzps.m4a...
   Ô£ô Gemini ha detectado 5 clips basados en emoci├│n!

ÔØî ERROR PROCESANDO VIDEO: name 'json' is not defined
Traceback (most recent call last):
  File "C:\proyectos\Zerf_Transcriptor\main.py", line 179, in process_video
    run_post_processing(result, output_name, metadata, transcriber, dict_manager, suggester, clip_analyzer, gemini_refiner, audio_path)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\proyectos\Zerf_Transcriptor\main.py", line 283, in run_post_processing
    json.dump({"suggested_clips": clips_ai}, f, ensure_ascii=False, indent=2)
    ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
­ƒôè Reporte Excel generado: output/reporte_general.xlsx

================================================================================
­ƒôè ESTAD├ìSTICAS
================================================================================
   Ô£à Videos procesados: 25
   ÔØî Videos fallidos: 6
   ÔÅ│ Videos pendientes: 997
================================================================================

Ô£¿ Proceso completado

Ô£ë´©Å Notificaci├│n enviada a Telegram.
