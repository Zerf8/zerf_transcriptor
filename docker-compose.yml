version: '3.8'

services:
  zerf-transcriptor:
    build: .
    container_name: zerf-transcriptor
    volumes:
      # Código fuente montado directamente (cambios instantáneos)
      - ./src:/app/src
      - ./main.py:/app/main.py
      # Persistir archivos de salida
      - ./output:/app/output
      # Persistir diccionario y estado
      - ./data:/app/data
      # Lista de videos (solo lectura)
      - ./lista_maestra_videos.txt:/app/lista_maestra_videos.txt:ro
    environment:
      # Modelo de Whisper a usar (medium para portátil)
      - WHISPER_MODEL=medium
      # Idioma principal (español)
      - LANGUAGE=es
      # Número de videos a procesar por ejecución (en modo manual: 1)
      - BATCH_SIZE=1
      # Modo de revisión (manual o auto)
      - REVIEW_MODE=manual
    stdin_open: true
    tty: true
